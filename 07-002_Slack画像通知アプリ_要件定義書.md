### 文書番号: 07-002

## 1. アプリ名
- アプリ名: Slack画像通知アプリ

## 2. 概要
Raspberry Piで撮影した画像をSlack API経由で指定チャンネルにアップロードし、通知するPythonアプリケーションです。IoTデバイスや監視カメラの画像をリアルタイムに共有する用途に活用します。

## 3. 目的
- Slack APIを用いたファイルアップロードとメッセージ送信を学ぶ
- PythonによるHTTPリクエストと認証情報管理を習得する
- 画像ファイルの取り扱いとログ出力方法を理解する

## 4. 対象利用者
- プログラミング初心者
- Raspberry Pi入門者
- Slack連携を学びたい開発者

## 5. システム構成
| コンポーネント               | 役割                             |
|-----------------------------|----------------------------------|
| Raspberry Pi 5              | スクリプト実行、ファイル送信      |
| カメラデバイス/画像ファイル   | 撮影デバイスまたは画像ファイル    |
| ネットワーク                | Slack API通信                    |
| Slackワークスペース          | 画像を受信し、チャンネルに投稿    |

## 6. ハードウェア要件
- Raspberry Pi 5本体
- 画像取得機構（カメラモジュールまたは共有フォルダ）
- ネットワーク接続（有線またはWi-Fi）

## 7. ソフトウェア要件
- OS：Raspberry Pi OS（最新推奨）
- 言語：Python 3.9以上

## 8. 機能要件
1. **画像ファイル取得**
   - 指定フォルダの最新画像を検出またはカメラデバイスから取得
2. **Slack認証情報読み込み**
   - 環境変数または `.env` ファイルから Slack Bot Token と Channel ID を取得
3. **画像アップロード**
   - `files.upload` API を使用し、指定チャンネルに画像をアップロード
4. **メッセージ送信**
   - アップロード完了後、画像のURLを含むメッセージを同一チャンネルに投稿
5. **エラーハンドリング**
   - 通信失敗や認証エラー時にリトライまたはログ出力
6. **ログ出力**
   - 実行結果（成功/失敗）を標準出力またはログファイルへ記録

## 9. 非機能要件
- **可読性**: PEP8準拠でコメントを記載
- **保守性**: 関数分割とモジュール化により拡張しやすい設計
- **安全性**: Tokenをハードコードせず環境変数で管理
- **単一ファイル完結**: 可能な限り一つのPythonファイルで実装

## 10. テスト要件
- **認証テスト**: 無効Token時のエラー確認
- **画像アップロードテスト**: 正常動作でSlackに画像が投稿される
- **チャンネル指定テスト**: 無効なChannel ID時のエラーメッセージ確認
- **ネットワークエラー**: オフライン時のエラー処理確認

## 11. 受け入れ基準
1. 指定チャンネルに画像が正常にアップロードされる
2. メッセージが適切に投稿され、画像URLが表示される
3. 認証／通信エラー発生時に適切なログが出力される
4. 環境変数による設定変更が反映される

---
以上の要件をもとに、Slack画像通知アプリのプロトタイプを開発してください。
